<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Smart Escritura - 2º Tabelião</title>
    <link rel="stylesheet" type="text/css" href="css/estilo.css">
</head>
<body>
    <div class="conteudo"
    div class="imagem"
    <div align="center"></section><img src="imagens/logo.svg" alt="logo do 2º Tabelião Notas de São Paulo"/>
    </div>

    <h1>SMART ESCRITURA - COMPRA E VENDA</h1>



    <h3>Saldo de depósito: <span id="boxBalance">0</span> - <button onclick="valorDepositado()">Recarregar</button></h3>
    <hr>
    
    <h3>CAMPO DO COMPRADOR</h3>
    <form name="frmPayment" id="frmPayment" action="#" method="get" onsubmit="executePayment(); return false;">
        <div>
            <label for="motivation">O que você quer pagar? Digite 1 para imóvel, 2 para emolumentos ou 3 para o valor total: </label>
        </div>
        <div>
            <input type="text" name="motivation" id="motivation">
        </div>
        <div>
            <label for="amount">Digite o valor (em wei) a ser depositado na Smart Escritura: </label>
        </div>
        <div>
            <input type="number" name="amount" id="amount" value="1000000000000000"> Wei
        </div>
        <div>
            &nbsp;
        </div>
        <div>
            <button type="submit">Confirmar o Pagamento e Assinar Escritura</button>
        </div>
        <div>
            &nbsp;
        </div>
        <div id="boxCommStatus">
            (Status da Blockchain)
        </div>
    </form>
   




<hr>
    <h3>CAMPO DO VENDEDOR</h3>

    
    <div>A situação de assinatura vendedor é: <span id="campoStatus">&nbsp;</span></div>
    <div>O valor do imovel é: <span id="campoValorImovel">&nbsp;</span></div>

 <form action="#" method="get" id="frmStatus" name="frmStatus" onsubmit="registrarMudancaStatus(); return false;">
        <div>
            <label for="txtStatusAssinadaVendedor">Digite "concordo" para assinar a Smart Escritura: </label>
            <input type="text" name="txtStatusAssinadaVendedor" id="txtStatusAssinadaVendedor" maxlength="8">
        </div>
        <div>
            &nbsp;
        </div>
        <div>
            <button type="submit">Assinar</button>
        </div>
        <div><br><hr></div>
        <div id="caixaStatusTx">
            &nbsp;
        </div>
    </form>
 <hr>
<hr>

<script>
        var status;
        var campoStatus = document.getElementById("campoStatus"); 
        var campoValorImovel = document.getElementById("campoValorImovel");
        contrato.statusAssinadaVendedor()
            .then( (resultado) => {
                campoStatus.innerHTML = resultado;
            })
            .catch( (err) => {
                console.error(err);
                campoStatus.innerHTML = err;
            });   
        contrato.valorImovel()
            .then( (valorImovel) => {
                campoValorImovel.innerHTML = valorImovel;
            })
            .catch( (err) => {
                console.error(err);
                campoValorimovel.innerHTML = err;
            });                                       
    </script>

























    <script charset="utf-8"
        src="https://cdn.ethers.io/scripts/ethers-v4.min.js"
        type="text/javascript">
    </script>
    <script src="javascript/abi.js"></script>
    <script src="javascript/blockchain.js"></script>
    
    <script>
        valorDepositado();
        </script>
     
    
</body>
</html>

